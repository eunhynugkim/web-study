<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <style>
        #game-table td {
            width: 100px;
            height: 200px;
            border: 1px solid black;
        }

        #game-container {
            display: inline-block;
        }

        #middle-container {
            text-align: center;
            width: 100%;
        }

        #game-table {
            border-spacing: 0;
            border: 1px solid black;
            /*margin-top:-5127px;*/

        }

        .gray {
            background-color: gray;
        }

        .red {
            background-color: red;
        }

        .black {
            background-color: black;
        }

        body {
            margin: 0;
            overflow: hidden;
        }
    </style>

</head>
<body>
<div id="middle-container">
    <div id="game-container">
        <table id="game-table" border="1" style="margin-top: -4813px">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
</div>

<script>
    var gameTable = document.getElementById("game-table"); //game-table이라는 id를 가진 요소에 접근
    var gameTableBody = gameTable.children[0]; //gameTable의 첫번째 자식을 gameTableBody에 지정
    var rows = gameTableBody.children; //gaemeTableBody의 자식을 row에 지정
    var count = 0; //0으로 초기화
    var time = 0; //0으로 초기화
    var firstCheck = true;
    var timer;
    for (var i = 0; i < rows.length; ++i) {
        var columns = rows[i].children;
        var index = Math.floor(Math.random() * columns.length);
        //column의 길이만큼 난수를 발생시키고 소수점 이하는 버리고 정수만
        columns[index].classList.add("black"); //타일을 black으로 색상을 칠한다.
    }
    window.onkeypress = function (event) { //자판에서 key를 누르고 있는동안 이벤트를 발생시킨다.
        var key = event.key;
        var nowIndex = rows.length - 1 - count;
        var KEY_MAP = {
            '1': 0,
            '2': 1,
            '3': 2,
            '4': 3
        }
        if(firstCheck){
            firstCheck = false;
            timer = setInterval(function(){
                time+=0.025;
            },25)

            //1번째 인자값인 함수를 2번째 인자값인 ms 마다 실행
        }
        var nowColumn = rows[nowIndex].children[KEY_MAP[key]];

        if (nowColumn.classList.contains("black")) {
            nowColumn.classList.replace("black", "gray"); //black을 gray로 바꿔준다.
            count++; //카운트 증가
            gameTable.style.marginTop = parseInt(gameTable.style.marginTop.split('px')[0]) + 204 + "px";
        } else {                               //틀렸으면
            nowColumn.classList.add("red");   //red타일로 색상 바꿔준다.
            clearInterval(timer);             //setInterval로 반복하고 있는걸멈춘다.
            alert(count);                     //맞춘갯수를 알려준다.

        }
        if (count == 25) {  //25개의 타일을 다 맞추면
            clearInterval(timer);
            alert(time); //완료한 시간을 알려줌
        }


    }

</script>
</body>
</html>